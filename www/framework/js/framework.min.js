!function(){"use strict";angular.module(config.frameworkModuleName,[]);for(var e=0;e<config.baseFrameworkModules.length;e++)console.log("Registering Framework Module : "+config.baseFrameworkModules[e]),config.registerFrameworkModule(config.baseFrameworkModules[e]);for(var e=0;e<config.frameworkModuleVendorDependencies.length;e++)console.log("Adding Framework Dependency : "+config.frameworkModuleVendorDependencies[e]),config.addFrameworkDependency(config.frameworkModuleVendorDependencies[e])}();
var translateProvider="";!function(){"use strict";angular.module(config.frameworkModuleName).config(["$stateProvider","$urlRouterProvider","$translateProvider","$ionicConfigProvider","$compileProvider",function(e,a,t,r,n){for(var l in Messages)t.translations(l,Messages[l]);t.preferredLanguage(config.appLanguagePreference.preferredLanguage),t.fallbackLanguage(config.appLanguagePreference.fallbackLanguage),t.useSanitizeValueStrategy("sanitizeParameters"),r.views.forwardCache(!1),n.debugInfoEnabled(!1),r.backButton.text(""),r.views.swipeBackEnabled(!1),r.scrolling.jsScrolling(!0),e.state("app",{abstract:!0,url:"/app",templateUrl:"framework/templates/theme.html",controller:"appCtrl"}),config.useLogin&&(e.state("login",{url:"/login",templateUrl:"app/modules/login/login.html",controller:"LoginCtrl",cache:!1}),a.otherwise("/login")),e.state("app.view",{abstract:!0,url:"/view",views:{appView:{templateUrl:"framework/templates/appView.html"},settings:{templateUrl:"app/templates/settings.html"},menu:{templateUrl:"app/templates/menu.html"}}})}]).run(["$rootScope","$state","$stateParams","$ionicPlatform","Auth",function(e,a,t,r,n){e.$state=a,e.$stateParams=t,config.useLogin&&e.$on("$stateChangeStart",function(e,t,r,l,o){"/login"==t.url||n.isUserLoggedIn()||(e.preventDefault(),a.go("login"))})}])}();
scope="",fileUtils="",function(){"use strict";angular.module(config.frameworkModuleName).controller("frameworkCtrl",["$scope","$state","$ionicConfig","$ionicLoading","$ionicPopup","Auth","$ionicHistory","$timeout","$ionicPlatform","$ionicModal","$ionicNavBarDelegate","$ionicSideMenuDelegate","$translate","NativePageTransition","FileUtils",function(e,o,t,n,i,a,r,c,s,u,l,d,g,f,p){console.log("frameworkCtrl"),scope=e,fileUtils=p,e.config=config,e.stateParams={},s.ready(function(){if(e.config.isNativePageTransitionEnabled()){t.views.transition("NONE");var o=e.config.theme.nativePageTransition.options,n=window.plugins.NativePageTransitionPlugin.globalOptions;$.extend(!0,n,o)}else t.views.transition(e.config.theme.cssPageTransitionType)}),e.showNextPage=function(t,n,i,a){e.stateParams[t]=n,config.viewCache[t]||(config.viewCache[t]={}),void 0!=i&&1==i.reload&&(config.viewCache[t].reload=!0),o.go(t),e.config.isNativePageTransitionEnabled()?f.showNextPage(i,a):"function"==typeof a&&a()},e.showPrevPage=function(t,n,i){if(null!=r.backView()){var a="";if(n&&n.pageCount){var c=r.currentView(),s=r.viewHistory(),u=s.histories[c.historyId];if(void 0!=u){var l=u.stack,d=l.length+n.pageCount-1;d>0&&l[d]&&(a=l[d].stateName,console.log("prevPageStateName",a))}}else a=r.backView().stateName;config.viewCache[a]||(config.viewCache[a]={}),void 0!=n&&1==n.reload&&(config.viewCache[a].reload=!0),n&&n.pageCount?r.goBack(n.pageCount):o.go(a),e.config.isNativePageTransitionEnabled()?f.showPrevPage(n,i):"function"==typeof i&&i()}},e.getCurrentStateParams=function(){return e.stateParams[r.currentView().stateName]},e.ionicGoBack=e.showPrevPage,e.handleViewCaching=function(e){var o=e.viewScope,t=e.viewController,n=e.viewStateName;o.$on("$ionicView.enter",function(e,o){config.viewCache[n]&&(console.log("Reload "+n+" : "+config.viewCache[n].reload),1==config.viewCache[n].reload&&(console.log("Invoking View Controller"),t()))}),o.$on("$ionicView.beforeLeave",function(e,o){console.log("Reseting Reload Values For "+n),config.viewCache[n].reload=!1})},e.overrideIonicBackButton=function(o,t){if(angular.isUndefined(o)||angular.isUndefined(t)||"function"!=typeof t)return void console.log("Pass valid argumets to overrideIonicBackButton");console.log("In overrideIonicBackButton");var n=e.$ionicGoBack;e.$ionicGoBack=function(){console.log("Custom back button called"),t()};var i=function(){e.$ionicGoBack=n},a=s.registerBackButtonAction(t,101);o.$on("$destroy",function(){a(),i()})},e.showLoadingIndicator=function(o){o||(o=""),n.show({template:e.config.theme.spinner+o,animation:"fade-in",showBackdrop:!1,maxWidth:200,showDelay:0})},e.hideLoadingIndicator=function(){n.hide()},e.getMessage=function(e){return g.instant(e)},e.changeLanguage=function(e){g.use(e)},e.showHeaderBar=function(){l.showBar(!0),d.canDragContent(!0)},e.hideHeaderBar=function(){l.showBar(!1),d.canDragContent(!1)},e.hideHeaderBarForCurrentView=function(o){o.$on("$ionicView.enter",function(o,t){e.hideHeaderBar()}),o.$on("$ionicView.beforeLeave",function(o,t){e.showHeaderBar()})},e.closePopUp=function(o){var t=o||e.ionicPopUp;null!=t&&(t.close(),$(".popup-container").remove(),t=null)},e.showAlert=function(o,t,n){e.closePopUp(),e.ionicPopUp=i.show({title:o,template:t,buttons:[{text:"OK",type:"button-clear",onTap:function(o){e.closePopUp(),"function"==typeof n&&n()}}]})},e.showConfirm=function(o,t,n){e.closePopUp(),e.ionicPopUp=i.show({title:o,template:t,buttons:[{text:"Cancel",type:"button-clear",onTap:function(o){e.closePopUp(),"function"==typeof n&&n(!1)}},{text:"OK",type:"button-clear",onTap:function(o){e.closePopUp(),"function"==typeof n&&n(!0)}}]})},e.showToast=function(o,t,n,i){void 0==t&&(t=o),nativeToast.isSupported()?nativeToast.showToast(t,i,n):e.showAlert(o,t,n)},config.useLogin&&e.$watch(a.isUserLoggedIn,function(e,t){e||(console.log("User Is Not Logged In, Redirecting to Login Page"),o.go("login",{},{reload:!0})),e&&console.log("User Is Logged In")},!0),e.authenticationService=function(e,o,t){var n={};n.record=e;var i={adapter:config.authAdapter,procedure:"authenticateUser",parameters:[n]};void 0==o&&(o=function(){}),void 0==t&&(t=function(){});var a={onSuccess:o,onFailure:t,timeout:config.connectionTimeout};WL.Client.invokeProcedure(i,a)},e.reloadApp=function(){document.location.reload(!0)},e.logoutUserFromApp=function(){e.reloadApp()},e.logoutUser=function(){var o=function(o){WL.Logger.info("Logout Success : "+JSON.stringify(o)),e.hideLoadingIndicator(),e.logoutUserFromApp()},t=function(o){WL.Logger.info("Error occurred while logging out : "+JSON.stringify(o)),e.hideLoadingIndicator(),e.logoutUserFromApp()},n={onSuccess:o,onFailure:t};e.showLoadingIndicator(),WL.Client.logout(config.realmName,n),WL.Client.getEnvironment()==WL.Environment.PREVIEW&&c(function(){o()},2500)},e.showadapterFailMessage=function(o){void 0!=o&&WL.Logger.info("Adapter Failure! "+JSON.stringify(o)),e.hideLoadingIndicator(),e.showToast(e.getMessage("adapterFailTitle"),e.getMessage("adapterFailMessage"))},e.clearCacheAndHistory=function(){console.log("In clearCacheAndHistory"),r.clearCache(),r.clearHistory()},e.checkForDirectUpdate=function(){WL.Client.login("wl_directUpdateRealm",{onSuccess:function(){},onFailure:function(){}})},s.registerBackButtonAction(function(e){e.preventDefault()},100),e.deviceBackButtonHandler=function(){console.log("Back button fired -- page : "+window.location.hash),r.backView()&&"login"==r.backView().stateName?e.deviceBackButtonExit():e.showPrevPage()},e.deviceBackButtonExit=function(){WL.Toast.show(e.getMessage("deviceBackBtnExitMsg")),WL.Logger.info("deviceBackButtonExit fired"),WL.App.resetBackButton(),WL.App.overrideBackButton(function(){navigator.app.exitApp()}),setTimeout(function(){WL.App.resetBackButton(),WL.App.overrideBackButton(e.deviceBackButtonHandler)},2e3)},config.overrideHardwareBackButton&&(e.initPlugins=function(){}),ionic.Platform.ready(e.initPlugins),e.showDatePicker=function(e,o,t){"function"!=typeof o&&(o=function(){}),"function"!=typeof t&&(t=function(){});var n={date:new Date,mode:"date"};e=$.extend({},n,e),nativeDatePicker.showDatePicker(e,o,t)},e.selectDate=function(o,t,n,i){"function"!=typeof n&&(n=function(){}),"function"!=typeof i&&(i=function(){});var a=$(o),r=(new Date).getTime(),c=void 0,s=void 0,u={dateFormat:"dd-MMM-yyyy",hideDate:!1,minDate:c,maxDate:s,pickerType:"past"};t=$.extend({},u,t),"past"==t.pickerType&&t.maxDate==s?t.maxDate=r:"future"==t.pickerType&&t.minDate==c&&(t.minDate=r);var l=$(a).attr("data-dategettime");angular.isDefined(l)&&!isNaN(l)&&(t.date=new Date(parseInt(l))),e.showDatePicker(t,function(e){if(e instanceof Date){var o=$filter("date")(e,t.dateFormat);$(a).is("input")?($(a).val(o).addClass("used").change(),$(a).attr("data-date",e),$(a).attr("data-dategettime",e.getTime())):($(a).html(o),$(a).attr("data-date",e),$(a).attr("data-dategettime",e.getTime()))}n(e)},i)},e.appResumeEventHandler=function(){WL.Logger.info("Application Comes In Foreground, Checking For Direct Update"),e.checkForDirectUpdate()},ionic.Platform.ready(function(){}),e.getCurrentLocation=function(){var e=$.Deferred(),o=1==ionic.Platform.isIOS()?3e4:1e4;if(navigator.geolocation){var t={enableHighAccuracy:!0,timeout:o};navigator.geolocation.getCurrentPosition(e.resolve,e.reject,t)}else e.reject();return e},e.invokeAdapterProcedure=function(o){var t=$.Deferred(),n=function(o){void 0!=o.responseJSON&&1==o.responseJSON.authRequired?console.log("User Session Expired"):200==o.status&&o.responseJSON&&1==o.responseJSON.isSuccessful?t.resolve(o):e.showadapterFailMessage(o)},i=function(e){void 0!=e.responseJSON&&1==e.responseJSON.authRequired?console.log("User Session Expired"):t.reject(e)},a={adapter:o.adapter,procedure:o.procedure,parameters:[o.param]},r={onSuccess:n,onFailure:i,timeout:config.connectionTimeout};return console.log(a),WL.Client.invokeProcedure(a,r),t},e.loadMore=function(e,o){console.log("InloadMore : options"+o);var t=o.itemArrayKey;angular.isUndefined(t)&&(e[t]=new Array,console.log("Element item-array-key is mandatory"));var n=o.itemsToLoad;n&&!isNaN(n)?e.itemsToLoad=parseInt(n):e.itemsToLoad=5;var i=o.itemsToDisplay;i&&!isNaN(i)?e.itemsToDisplay=parseInt(i):e.itemsToDisplay=e.itemsToLoad,c(function(){e.loadMoreItems(e,o)},1e3)},e.loadMoreItems=function(e,o){o.itemsToDisplay<e[o.itemArrayKey].length?(o.itemsToDisplay+=o.itemsToLoad,o.loadFinish=!1):o.loadFinish=!0,e.$broadcast("scroll.infiniteScrollComplete")},e.getPageNameFromURL=function(e){return/^(http|https):\/\//.test(e)&&(e=e.split("://")[1]),$.ajax({url:"http://textance.herokuapp.com/title/"+e,dataType:"text"})},e.openExternalUrl=function(e,o){o&&o.stopPropagation(),/^(http|https):\/\//.test(e)||(e="http://"+e),window.open(e,"_system")}}])}();